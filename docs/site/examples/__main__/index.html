
<!doctype html>
<html lang="en" class="no-js">
  <head>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">



        <link rel="canonical" href="https://flyvis.github.io/examples/__main__/">




      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.38">



        <title>main - Flyvis</title>



      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">


        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">












        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>



      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">

    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>






  </head>







    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">


    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">


        <a href="#task-performance" class="md-skip">
          Skip to content
        </a>

    </div>
    <div data-md-component="announce">

    </div>






<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Flyvis" class="md-header__button md-logo" aria-label="Flyvis" data-md-component="logo">

  <img src="../../images/logo_hexagon.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">

      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Flyvis
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">

                main

          </span>
        </div>
      </div>
    </div>






      <label class="md-header__button md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>

        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">

        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">

          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>

    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>


  </nav>

</header>

    <div class="md-container" data-md-component="container">






      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">



              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Flyvis" class="md-nav__button md-logo" aria-label="Flyvis" data-md-component="logo">

  <img src="../../images/logo_hexagon.jpg" alt="logo">

    </a>
    Flyvis
  </label>

  <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">


  <span class="md-ellipsis">
    Home
  </span>


      </a>
    </li>









    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">


  <span class="md-ellipsis">
    Installation
  </span>


      </a>
    </li>













    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >


          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">


  <span class="md-ellipsis">
    Tutorials
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../01_flyvision_connectome/" class="md-nav__link">


  <span class="md-ellipsis">
    Explore the connectome
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../02_flyvision_optic_flow_task/" class="md-nav__link">


  <span class="md-ellipsis">
    Train the network
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../03_flyvision_flash_responses/" class="md-nav__link">


  <span class="md-ellipsis">
    Flash responses
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../04_flyvision_moving_edge_responses/" class="md-nav__link">


  <span class="md-ellipsis">
    Moving edge responses
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../05_flyvision_umap_and_clustering_models/" class="md-nav__link">


  <span class="md-ellipsis">
    Ensemble clustering
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../06_flyvision_maximally_excitatory_stimuli/" class="md-nav__link">


  <span class="md-ellipsis">
    Maximally excitatory stimuli
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../07_flyvision_providing_custom_stimuli/" class="md-nav__link">


  <span class="md-ellipsis">
    Custom stimuli
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>









    <li class="md-nav__item">
      <a href="../../contribute/" class="md-nav__link">


  <span class="md-ellipsis">
    Contributing
  </span>


      </a>
    </li>













    <li class="md-nav__item md-nav__item--nested">



        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >


          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">


  <span class="md-ellipsis">
    API Reference
  </span>


            <span class="md-nav__icon md-icon"></span>
          </label>

        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>







    <li class="md-nav__item">
      <a href="../../reference/connectome/" class="md-nav__link">


  <span class="md-ellipsis">
    Connectome
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/network/" class="md-nav__link">


  <span class="md-ellipsis">
    Network
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/sintel/" class="md-nav__link">


  <span class="md-ellipsis">
    Sintel
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/tasks/" class="md-nav__link">


  <span class="md-ellipsis">
    Task
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/solver/" class="md-nav__link">


  <span class="md-ellipsis">
    Task Training
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/flash_responses/" class="md-nav__link">


  <span class="md-ellipsis">
    Flash Responses
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/moving_stimulus_responses/" class="md-nav__link">


  <span class="md-ellipsis">
    Moving Stimulus Responses
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/ensemble_clustering/" class="md-nav__link">


  <span class="md-ellipsis">
    Ensemble Clustering
  </span>


      </a>
    </li>










    <li class="md-nav__item">
      <a href="../../reference/optimal_stimuli/" class="md-nav__link">


  <span class="md-ellipsis">
    Optimal Stimuli
  </span>


      </a>
    </li>




          </ul>
        </nav>

    </li>









    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">


  <span class="md-ellipsis">
    FAQ
  </span>


      </a>
    </li>









    <li class="md-nav__item">
      <a href="../../acknowledgements/" class="md-nav__link">


  <span class="md-ellipsis">
    Acknowledgements
  </span>


      </a>
    </li>



  </ul>
</nav>
                  </div>
                </div>
              </div>



              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">






    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>

        <li class="md-nav__item">
  <a href="#training-and-validation-losses" class="md-nav__link">
    <span class="md-ellipsis">
      Training and validation losses
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#learned-parameter-marginals" class="md-nav__link">
    <span class="md-ellipsis">
      Learned parameter marginals
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#dead-or-alive" class="md-nav__link">
    <span class="md-ellipsis">
      Dead or alive
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#contrast-selectivity-and-flash-response-indices-fri" class="md-nav__link">
    <span class="md-ellipsis">
      Contrast selectivity and flash response indices (FRI)
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#motion-selectivity-and-direction-selectivity-index-dsi" class="md-nav__link">
    <span class="md-ellipsis">
      Motion selectivity and direction selectivity index (DSI)
    </span>
  </a>

</li>

        <li class="md-nav__item">
  <a href="#clustering-of-models-based-on-responses-to-naturalistic-stimuli" class="md-nav__link">
    <span class="md-ellipsis">
      Clustering of models based on responses to naturalistic stimuli
    </span>
  </a>

</li>

    </ul>

</nav>
                  </div>
                </div>
              </div>



            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">




<p>Main notebook containing relevant diagnostics and important figures for the manuscript. </p>
<p>It is automatically copied from __main__.ipynb and executed for newly trained ensembles using papermill.</p>
<p>This can also be updated and then triggered again by using the script `execute_ensemble_notebook.py&rsquo;.</p>
<div class="highlight"><pre><span></span><code>from pathlib import Path
import torch
from torch import nn
from torch.nn import functional as nnf
import matplotlib as mpl
import matplotlib.pyplot as plt
import pandas as pd
import numpy as np
from flyvision import results_dir
from flyvision import EnsembleView

import logging
from flyvision.analysis.moving_bar_responses import plot_angular_tuning
from flyvision.plots.plt_utils import add_cluster_marker, get_marker
logging.disable(100)


mpl.rcParams[&quot;figure.dpi&quot;] = 300

%load_ext autoreload
%autoreload 2
</code></pre></div>
<div class="codehilite"><pre><span></span><code>The autoreload extension is already loaded. To reload it, use:
  %reload_ext autoreload
</code></pre></div>

<div class="highlight"><pre><span></span><code>ensemble_name = &quot;flow/9997&quot;  # type: str
</code></pre></div>
<div class="highlight"><pre><span></span><code>validation_subdir = &quot;validation&quot;
loss_file_name = &quot;loss&quot;
</code></pre></div>
<div class="highlight"><pre><span></span><code>ensemble = EnsembleView(ensemble_name,
                        best_checkpoint_fn_kwargs=
                        {
                                                   &quot;validation_subdir&quot;: validation_subdir,
                                                   &quot;loss_file_name&quot;: loss_file_name
                                                   }
                        )
</code></pre></div>
<div class="codehilite"><pre><span></span><code>Loading ensemble:   0%|          | 0/50 [00:00&lt;?, ?it/s]
</code></pre></div>

<div class="highlight"><pre><span></span><code>print(f&quot;Description of experiment: {ensemble[0].dir.config.description}&quot;)
</code></pre></div>
<div class="codehilite"><pre><span></span><code>Description of experiment: test
</code></pre></div>

<h1 id="task-performance">Task performance<a class="headerlink" href="#task-performance" title="Permanent link">&para;</a></h1>
<h2 id="training-and-validation-losses">Training and validation losses<a class="headerlink" href="#training-and-validation-losses" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>fig, ax = ensemble.training_loss()
</code></pre></div>
<p><img alt="png" src="../__main___files/__main___8_0.png" /></p>
<div class="highlight"><pre><span></span><code>fig, ax = ensemble.validation_loss()
</code></pre></div>
<p><img alt="png" src="../__main___files/__main___9_0.png" /></p>
<div class="highlight"><pre><span></span><code>fig, ax = ensemble.task_error_histogram()
</code></pre></div>
<p><img alt="png" src="../__main___files/__main___10_0.png" /></p>
<h2 id="learned-parameter-marginals">Learned parameter marginals<a class="headerlink" href="#learned-parameter-marginals" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>fig, axes = ensemble.node_parameters(&quot;bias&quot;)
</code></pre></div>
<p><img alt="png" src="../__main___files/__main___12_0.png" /></p>
<div class="highlight"><pre><span></span><code>fig, axes = ensemble.node_parameters(&quot;time_const&quot;)
</code></pre></div>
<p><img alt="png" src="../__main___files/__main___13_0.png" /></p>
<div class="highlight"><pre><span></span><code>fig, axes = ensemble.edge_parameters(&quot;syn_strength&quot;)
</code></pre></div>
<p><img alt="png" src="../__main___files/__main___14_0.png" /></p>
<h2 id="dead-or-alive">Dead or alive<a class="headerlink" href="#dead-or-alive" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>fig, ax, cbar, matrix = ensemble.dead_or_alive()
</code></pre></div>
<div class="codehilite"><pre><span></span><code>___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
</code></pre></div>

<p><img alt="png" src="../__main___files/__main___16_1.png" /></p>
<h2 id="contrast-selectivity-and-flash-response-indices-fri">Contrast selectivity and flash response indices (FRI)<a class="headerlink" href="#contrast-selectivity-and-flash-response-indices-fri" title="Permanent link">&para;</a></h2>
<h4 id="20-best-task-performing-models">20% best task-performing models<a class="headerlink" href="#20-best-task-performing-models" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>with ensemble.ratio(best=0.2):
    ensemble.flash_response_index()
</code></pre></div>
<div class="codehilite"><pre><span></span><code>___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
</code></pre></div>

<p><img alt="png" src="../__main___files/__main___19_1.png" /></p>
<h4 id="100-models">100% models<a class="headerlink" href="#100-models" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>fig, ax = ensemble.flash_response_index()
</code></pre></div>
<div class="codehilite"><pre><span></span><code>___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
</code></pre></div>

<p><img alt="png" src="../__main___files/__main___21_1.png" /></p>
<h2 id="motion-selectivity-and-direction-selectivity-index-dsi">Motion selectivity and direction selectivity index (DSI)<a class="headerlink" href="#motion-selectivity-and-direction-selectivity-index-dsi" title="Permanent link">&para;</a></h2>
<h4 id="20-best-task-performing-models_1">20% best task-performing models<a class="headerlink" href="#20-best-task-performing-models_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>with ensemble.ratio(best=0.2):
    ensemble.direction_selectivity_index()
</code></pre></div>
<div class="codehilite"><pre><span></span><code>___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
</code></pre></div>

<p><img alt="png" src="../__main___files/__main___24_1.png" /></p>
<h4 id="100-models_1">100% models<a class="headerlink" href="#100-models_1" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>ensemble.direction_selectivity_index()
</code></pre></div>
<div class="codehilite"><pre><span></span><code>___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min





(&lt;Figure size 3000x360 with 2 Axes&gt;, (&lt;Axes: &gt;, &lt;Axes: &gt;))
</code></pre></div>

<p><img alt="png" src="../__main___files/__main___26_2.png" /></p>
<h2 id="clustering-of-models-based-on-responses-to-naturalistic-stimuli">Clustering of models based on responses to naturalistic stimuli<a class="headerlink" href="#clustering-of-models-based-on-responses-to-naturalistic-stimuli" title="Permanent link">&para;</a></h2>
<h4 id="t4c">T4c<a class="headerlink" href="#t4c" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>task_error = ensemble.task_error()
embeddingplot = ensemble.clustering(&quot;T4c&quot;).plot(task_error=task_error.values,
                                                colors=task_error.colors)
</code></pre></div>
<div class="codehilite"><pre><span></span><code>___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min
___________________________________compute_responses cache loaded - 0.0s, 0.0min


/home/lappalainenj@hhmi.org/miniconda3/envs/flyvision/lib/python3.9/site-packages/umap/umap_.py:1356: RuntimeWarning: divide by zero encountered in power
  return 1.0 / (1.0 + a * x ** (2 * b))
</code></pre></div>

<p><img alt="png" src="../__main___files/__main___29_2.png" /></p>
<div class="highlight"><pre><span></span><code>r = ensemble.moving_edge_responses()
</code></pre></div>
<div class="highlight"><pre><span></span><code>cluster_indices = ensemble.cluster_indices(&quot;T4c&quot;)
</code></pre></div>
<div class="highlight"><pre><span></span><code>colors = ensemble.task_error().colors
</code></pre></div>
<div class="highlight"><pre><span></span><code>fig, axes = plt.subplots(
    1, len(cluster_indices), subplot_kw={&quot;projection&quot;: &quot;polar&quot;}, figsize=[2, 1]
)
for cluster_id, indices in cluster_indices.items():
    plot_angular_tuning(
        r.sel(network_id=indices),
        &quot;T4c&quot;,
        intensity=1,
        colors=colors[indices],
        zorder=ensemble.zorder()[indices],
        groundtruth=True if cluster_id == 0 else False,
        fig=fig,
        ax=axes[cluster_id],
    )
    add_cluster_marker(fig, axes[cluster_id], marker=get_marker(cluster_id))
</code></pre></div>
<p><img alt="png" src="../__main___files/__main___33_0.png" /></p>
<div class="highlight"><pre><span></span><code>
</code></pre></div>













              </article>
            </div>


<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>

      </main>

        <footer class="md-footer">

  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">


    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>

</div>

    </div>
  </div>
</footer>

    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>


    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>


      <script src="../../assets/javascripts/bundle.d6f25eb3.min.js"></script>


  </body>
</html>
