
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://flyvis.github.io/examples/01_flyvision_connectome/">
      
      
        <link rel="prev" href="../../install/">
      
      
        <link rel="next" href="../02_flyvision_optic_flow_task/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.38">
    
    
      
        <title>Explore the connectome - Flyvis</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#connectome" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Flyvis" class="md-header__button md-logo" aria-label="Flyvis" data-md-component="logo">
      
  <img src="../../images/logo_hexagon.jpg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Flyvis
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Explore the connectome
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Flyvis" class="md-nav__button md-logo" aria-label="Flyvis" data-md-component="logo">
      
  <img src="../../images/logo_hexagon.jpg" alt="logo">

    </a>
    Flyvis
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../install/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Explore the connectome
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Explore the connectome
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connectivity-between-identified-cell-types" class="md-nav__link">
    <span class="md-ellipsis">
      Connectivity between identified cell types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-receptive-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Example receptive fields
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-projective-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Example projective fields
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Network layout
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../02_flyvision_optic_flow_task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Train the network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03_flyvision_flash_responses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Flash responses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04_flyvision_moving_edge_responses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Moving edge responses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05_flyvision_umap_and_clustering_models/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ensemble clustering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../06_flyvision_maximally_excitatory_stimuli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Maximally excitatory stimuli
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../07_flyvision_providing_custom_stimuli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Custom stimuli
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contribute/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/connectome/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.connectome
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.network
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/initialization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.initialization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/decoder/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.decoder
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/objectives/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.objectives
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/tasks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.tasks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/solver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.solver
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/network_view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.networkview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/ensemble/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.ensemble
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/ensemble_view/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    flyvision.ensembleview
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../acknowledgements/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Acknowledgements
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#connectivity-between-identified-cell-types" class="md-nav__link">
    <span class="md-ellipsis">
      Connectivity between identified cell types
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-receptive-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Example receptive fields
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-projective-fields" class="md-nav__link">
    <span class="md-ellipsis">
      Example projective fields
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network-layout" class="md-nav__link">
    <span class="md-ellipsis">
      Network layout
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">flyvision</span>
<span class="kn">from</span> <span class="nn">flyvision</span> <span class="kn">import</span> <span class="n">connectome_file</span>
<span class="kn">from</span> <span class="nn">flyvision</span> <span class="kn">import</span> <span class="n">ConnectomeDir</span><span class="p">,</span> <span class="n">ConnectomeView</span>
</code></pre></div>
<h1 id="connectome">Connectome<a class="headerlink" href="#connectome" title="Permanent link">&para;</a></h1>
<p>This notebook illustrates the constructed spatially invariant connectome from local reconstructions that builds the
scaffold of the network.</p>
<p><strong>Select GPU runtime</strong></p>
<p>To run the notebook on a GPU select Menu -&gt; Runtime -&gt; Change runtime type -&gt; GPU.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># @markdown **Check access to GPU**</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">google.colab</span>

    <span class="n">IN_COLAB</span> <span class="o">=</span> <span class="kc">True</span>
<span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
    <span class="n">IN_COLAB</span> <span class="o">=</span> <span class="kc">False</span>

<span class="k">if</span> <span class="n">IN_COLAB</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">torch</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">cuda_name</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">cuda</span><span class="o">.</span><span class="n">get_device_name</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Name of the assigned GPU / CUDA device: </span><span class="si">{</span><span class="n">cuda_name</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">warnings</span>

        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;You have not selected Runtime Type: &#39;GPU&#39; or Google could not assign you one. Please revisit the settings as described above or proceed on CPU (slow).&quot;</span>
        <span class="p">)</span>
</code></pre></div>
<p><strong>Install Flyvis</strong></p>
<p>The notebook requires installing our package <code>flyvis</code>. You may need to restart your session after running the code block below with Menu -&gt; Runtime -&gt; Restart session. Then, imports from <code>flyvis</code> should succeed without issue.</p>
<div class="highlight"><pre><span></span><code><span class="k">if</span> <span class="n">IN_COLAB</span><span class="p">:</span>
    <span class="c1">#@markdown **Install Flyvis**</span>
    <span class="o">%%</span><span class="n">capture</span>
    <span class="err">!</span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">flyvis</span><span class="o">/</span><span class="n">flyvis</span><span class="o">-</span><span class="n">dev</span><span class="o">.</span><span class="n">git</span>
    <span class="o">%</span><span class="n">cd</span> <span class="o">/</span><span class="n">content</span><span class="o">/</span><span class="n">flyvis</span><span class="o">-</span><span class="n">dev</span>
    <span class="err">!</span><span class="n">pip</span> <span class="n">install</span> <span class="o">-</span><span class="n">e</span> <span class="o">.</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># The ConnectomeDir class compiles the network graph from `data/connectome/fib25-fib19_v2.2.json`.</span>
<span class="c1"># This json-file includes a list of cell types (`nodes`) and average convolutional filters </span>
<span class="c1"># (anatomical receptive fields) (`edges`) that are scattered across a regular hexagonal lattice </span>
<span class="c1"># of 15 column extent and stored on the hierarchical filesystem as h5-files.</span>
<span class="n">config</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="n">connectome_file</span><span class="p">,</span> <span class="n">extent</span><span class="o">=</span><span class="mi">15</span><span class="p">,</span> <span class="n">n_syn_fill</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">connectome</span> <span class="o">=</span> <span class="n">ConnectomeDir</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># our network models 45,669 cells represented in this table of nodes</span>
<span class="n">connectome</span><span class="o">.</span><span class="n">nodes</span><span class="o">.</span><span class="n">to_df</span><span class="p">()</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>role</th>
      <th>type</th>
      <th>u</th>
      <th>v</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>input</td>
      <td>R1</td>
      <td>-15</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>input</td>
      <td>R1</td>
      <td>-15</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>input</td>
      <td>R1</td>
      <td>-15</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>input</td>
      <td>R1</td>
      <td>-15</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>input</td>
      <td>R1</td>
      <td>-15</td>
      <td>4</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>45664</th>
      <td>output</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-4</td>
    </tr>
    <tr>
      <th>45665</th>
      <td>output</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-3</td>
    </tr>
    <tr>
      <th>45666</th>
      <td>output</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-2</td>
    </tr>
    <tr>
      <th>45667</th>
      <td>output</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>45668</th>
      <td>output</td>
      <td>TmY18</td>
      <td>15</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>45669 rows × 4 columns</p>
</div>

<div class="highlight"><pre><span></span><code><span class="c1"># our network models 1,513,231 synapses represented in this table of edges</span>
<span class="n">connectome</span><span class="o">.</span><span class="n">edges</span><span class="o">.</span><span class="n">to_df</span><span class="p">()</span>
</code></pre></div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>du</th>
      <th>dv</th>
      <th>edge_type</th>
      <th>n_syn</th>
      <th>n_syn_certainty</th>
      <th>sign</th>
      <th>source_index</th>
      <th>source_type</th>
      <th>source_u</th>
      <th>source_v</th>
      <th>target_index</th>
      <th>target_type</th>
      <th>target_u</th>
      <th>target_v</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>40.0</td>
      <td>5.859477</td>
      <td>-1.0</td>
      <td>0</td>
      <td>R1</td>
      <td>-15</td>
      <td>0</td>
      <td>5768</td>
      <td>L1</td>
      <td>-15</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>40.0</td>
      <td>5.859477</td>
      <td>-1.0</td>
      <td>1</td>
      <td>R1</td>
      <td>-15</td>
      <td>1</td>
      <td>5769</td>
      <td>L1</td>
      <td>-15</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>40.0</td>
      <td>5.859477</td>
      <td>-1.0</td>
      <td>2</td>
      <td>R1</td>
      <td>-15</td>
      <td>2</td>
      <td>5770</td>
      <td>L1</td>
      <td>-15</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>40.0</td>
      <td>5.859477</td>
      <td>-1.0</td>
      <td>3</td>
      <td>R1</td>
      <td>-15</td>
      <td>3</td>
      <td>5771</td>
      <td>L1</td>
      <td>-15</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>40.0</td>
      <td>5.859477</td>
      <td>-1.0</td>
      <td>4</td>
      <td>R1</td>
      <td>-15</td>
      <td>4</td>
      <td>5772</td>
      <td>L1</td>
      <td>-15</td>
      <td>4</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>1513226</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>1.0</td>
      <td>2.239571</td>
      <td>1.0</td>
      <td>45664</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-4</td>
      <td>45664</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-4</td>
    </tr>
    <tr>
      <th>1513227</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>1.0</td>
      <td>2.239571</td>
      <td>1.0</td>
      <td>45665</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-3</td>
      <td>45665</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-3</td>
    </tr>
    <tr>
      <th>1513228</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>1.0</td>
      <td>2.239571</td>
      <td>1.0</td>
      <td>45666</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-2</td>
      <td>45666</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-2</td>
    </tr>
    <tr>
      <th>1513229</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>1.0</td>
      <td>2.239571</td>
      <td>1.0</td>
      <td>45667</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-1</td>
      <td>45667</td>
      <td>TmY18</td>
      <td>15</td>
      <td>-1</td>
    </tr>
    <tr>
      <th>1513230</th>
      <td>0</td>
      <td>0</td>
      <td>chem</td>
      <td>1.0</td>
      <td>2.239571</td>
      <td>1.0</td>
      <td>45668</td>
      <td>TmY18</td>
      <td>15</td>
      <td>0</td>
      <td>45668</td>
      <td>TmY18</td>
      <td>15</td>
      <td>0</td>
    </tr>
  </tbody>
</table>
<p>1513231 rows × 14 columns</p>
</div>

<h2 id="connectivity-between-identified-cell-types">Connectivity between identified cell types<a class="headerlink" href="#connectivity-between-identified-cell-types" title="Permanent link">&para;</a></h2>
<p>Identified connectivity between 64 cell types, represented by total number of input synapses from all neurons of a given presynaptic cell type to a single postsynaptic of a given cell type. Blue color indicates putative hyperpolarizing inputs, red putative depolarizing inputs as inferred from neurotransmitter and receptor profiling. Size of squares indicates number of input synapses.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># the ConnectomeView class provides visualizations of the connectome data</span>
<span class="n">connectome_view</span> <span class="o">=</span> <span class="n">ConnectomeView</span><span class="p">(</span><span class="n">connectome</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="n">fig</span> <span class="o">=</span> <span class="n">connectome_view</span><span class="o">.</span><span class="n">connectivity_matrix</span><span class="p">(</span><span class="s2">&quot;n_syn&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../01_flyvision_connectome_files/01_flyvision_connectome_11_0.png" /></p>
<h2 id="example-receptive-fields">Example receptive fields<a class="headerlink" href="#example-receptive-fields" title="Permanent link">&para;</a></h2>
<p>Example of convolutional filter, representing inputs onto cells of the target cell type. Values represent the average number of synapses projecting from presynaptic cells in columns with indicated offset onto the postsynaptic dendrite. Values indicate connection strength derived from electron microscopy data.</p>
<div class="highlight"><pre><span></span><code><span class="n">fig</span> <span class="o">=</span> <span class="n">connectome_view</span><span class="o">.</span><span class="n">receptive_fields_grid</span><span class="p">(</span><span class="s2">&quot;T4c&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../01_flyvision_connectome_files/01_flyvision_connectome_13_0.png" /></p>
<h2 id="example-projective-fields">Example projective fields<a class="headerlink" href="#example-projective-fields" title="Permanent link">&para;</a></h2>
<p>Example of projective fields, representing outputs of a source cell type onto target cells. Values represent the average number of synapses projecting from the presynaptic cell onto postsynaptic dendrites in columns with indicated offset. Values indicate connection strength derived from electron microscopy data.</p>
<div class="highlight"><pre><span></span><code><span class="n">fig</span> <span class="o">=</span> <span class="n">connectome_view</span><span class="o">.</span><span class="n">projective_fields_grid</span><span class="p">(</span><span class="s2">&quot;T4c&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../01_flyvision_connectome_files/01_flyvision_connectome_15_0.png" /></p>
<h2 id="network-layout">Network layout<a class="headerlink" href="#network-layout" title="Permanent link">&para;</a></h2>
<p>Our retinotopic hexagonal lattice network organizes cells of each cell type into visual columns corresponding to photoreceptor locations to capture the crystalline, hexagonal structure of the fly eye. Some cell types are non-columnar, i.e. their cells occur only in every other column&mdash;here Lawf1 and Lawf2 cell types&mdash;as estimated by our connectome construction algorithm. The edges represent pairs of connected cell types. For the task, we decoded from T-shaped and transmedullary cells (within the black box).</p>
<div class="highlight"><pre><span></span><code><span class="c1"># cause the layout is spatially periodic it suffices to visualize a few columns</span>
<span class="c1"># to get the gist of the layout which can be controlled using max_extent</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">connectome_view</span><span class="o">.</span><span class="n">network_layout</span><span class="p">(</span><span class="n">max_extent</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</code></pre></div>
<p><img alt="png" src="../01_flyvision_connectome_files/01_flyvision_connectome_18_0.png" /></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.d6f25eb3.min.js"></script>
      
    
  </body>
</html>